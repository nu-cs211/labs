% vim: se et:
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{211common}[2020/04/11 0.0.1]

\newcommand\TERM{Winter 2020}
\newcommand\COURSENO{CS 211}
\newcommand\WEBROOT{https://users.cs.northwestern.edu/~jesse/course/cs211}

\newcommand\LabHostnames@Url
  {it.eecs.northwestern.edu/info/2015/11/03/info-labs.html\#workstations}
\newcommand\LabHostnames@ShortUrl
  {https://bit.ly/3c1qyui}
\newcommand\LabHostnamesLink
  {\href{\LabHostnames@ShortUrl}{{\UrlFont{\LabHostnames@Url}}}}
% Probably update this next year:
\newcommand\Cxx@setup@local{\WEBROOT/notes/toolchain_setup.html}
\newcommand\Cxx@setup@linux{\WEBROOT/notes/ge211_linux.html}

\DeclareOption*{\PassOptionsToPackage{\CurrentOption}{211lang}}
\ProcessOptions\relax

\RequirePackage{fancyvrb}
\RequirePackage{microtype}
\RequirePackage{url}
\RequirePackage{underscore}
\RequirePackage{amsmath}
\RequirePackage[dvipsnames]{xcolor}
\RequirePackage{hyperref}
\RequirePackage{211lang}

\newcommand\@pad@two[1]{\@pad@two@check#1\\}
\newcommand\@pad@two@check[2]{%
  \ifx#2\\0\fi
  #1%
}

\urlstyle{sf}

\newcommand\ZII@shade{85}
\colorlet{ZII@linkcolor}{violet}
\colorlet{ZII@citecolor}{YellowOrange}
\colorlet{ZII@urlcolor}{NavyBlue}

\hypersetup{
  linkcolor  = ZII@linkcolor!\ZII@shade!black,
  citecolor  = ZII@citecolor!\ZII@shade!black,
  urlcolor   = ZII@urlcolor!\ZII@shade!black,
  colorlinks = true,
}

\newcommand\progname[1]{\emph{#1}}
\newcommand\hostname[1]{\emph{#1}}
\newcommand\filename[1]{\textsf{#1}}
\newcommand\varname[1]{\textsf{#1}}
\newcommand\functionname[1]{\textsl{#1}}
\newcommand\functionref[2]{\functionname{#1}(#2)}
\newcommand\promptchar{\%}
\newcommand\prompt{{\normalfont\ttfamily\itshape\promptchar}}
\newcommand\cmdline[1]{\prompt{\normalfont\ttfamily~#1}}
\newcommand\keycombo[1]{\textsf{#1}}

\newcommand\codeBasicstyle{\ttfamily}
\newcommand\codeCommentstyle{\codeBasicstyle\color{gray}}
\newcommand\codeKeywordstyle{\codeBasicstyle\bfseries}
\newcommand\codeSpecialstyle{\codeKeywordstyle\color{red!30!black!80!white}}

\colorlet{metavar@color}{DarkCyan}
\newcommand\metavar[1]{%
  \textcolor{metavar@color}{%
    \ensuremath\langle
    {\normalfont\itshape#1}%
    \ensuremath\rangle%
  }%
}

\lstset{%
  upquote=true,
  basicstyle=\codeBasicstyle,
  commentstyle=\codeCommentstyle,
  keywordstyle=\codeKeywordstyle,
  keywordstyle=[2]\codeKeywordstyle,
  keywordstyle=[3]\codeSpecialstyle,
  escapeinside={‹}{›},
}

\newenvironment{CmdLine}[1][3em]
  {%
    \ttfamily
    \def\O##1\\{\item{##1}}%
    \def\C##1\\{\O\prompt~\textbf{##1}\\}%
    \def\I##1\\{\O\textbf{##1}\\}%
    \def\E##1\\{\O\underline{##1}\\}%
    \def\ETC{\O\ensuremath{\vdots}\\}%
    \def\finish@CmdLine{\O\prompt\\}%
    \def\NoPrompt{\let\finish@CmdLine\relax}%
    \begin{list}{}{
      \leftmargin=#1%
      \parsep=0pt%
      \itemsep=-1pt%
    }
  }
  {%
    \finish@CmdLine
    \end{list}%
  }

\newenvironment{CmdLine*}[1][3em]
  {\begin{CmdLine}}
  {\NoPrompt\end{CmdLine}}
